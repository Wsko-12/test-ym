<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript" >
      if(false){
       (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
       m[i].l=1*new Date();
       for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
       k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
       (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
    
       ym(102462605, "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true,
            webvisor:true
       });
      }
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/102462605" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->





    <script>
      if(false){
              const start = performance.now();
      // Initialize the agent on page load.
  const fpPromise = import('https://fpjscdn.net/v3/cheURAKfVuViSYMWYbi2')
    .then(FingerprintJS => FingerprintJS.load());

  // Pass your own data to get()
  fpPromise
    .then(fp => fp.get())
    .then(result => {
      console.log(result);
      console.log(performance.now() - start)
    });

      }


    </script>

    <!-- <script src="https://wsko-12.github.io/wwskgithubo.js"></script> -->
</head>
<body>
  <h1>Test</h1>
</body>
    <script>
const p =           document.createElement("p")
          document.body.appendChild(p )

navigator.storage.getDirectory().then(({kind}) => {
        p.innerText = kind
      }).catch((e) => {
            p.innerText = e.message
      })
    </script>

    <script type="module">
        const hasFont = (function () {
            const fontsDiv = document.createElement("div");
            fontsDiv.style.fontFamily = "monospace";
            fontsDiv.style.fontSize = "20px";
            document.body.appendChild(fontsDiv);

            return function (font) {
                const base = document.createElement("span");
                const br = document.createElement("br");
                const br2 = document.createElement("br");

                const test = document.createElement("span");

                base.style.fontFamily = "monospace";
                test.style.fontFamily = `"${font}", monospace`;

                base.textContent = test.textContent = "mmmmmmmmmm";

                fontsDiv.appendChild(base);
                fontsDiv.appendChild(br);
                fontsDiv.appendChild(test);
                fontsDiv.appendChild(br2);


                const same = base.offsetWidth === test.offsetWidth;

                base.remove();
                br.remove();
                test.remove();
                br2.remove();

                return !same;
            };
        })();

        const HARDWARE = {};
        const HARDWARE_UNSTABLE = {}
        const PERIPHERAL_HARDWARE = {};
        const OS_PARTIALLY_STABLE = {};
        const OS_RARELY_CHANGEABLE = {};

        const renderResult = () => {
            const code = document.createElement("code");

            [
                ["HARDWARE", HARDWARE],
                ["HARDWARE_UNSTABLE", HARDWARE_UNSTABLE],
                ["OS_PARTIALLY_STABLE", OS_PARTIALLY_STABLE],
                ["OS_RARELY_CHANGEABLE", OS_RARELY_CHANGEABLE],
            ].forEach(([name, obj]) => {
                const pre = document.createElement("pre");
                code.appendChild(pre);
                pre.innerText += `${name}:\n ${JSON.stringify(obj, null, 2)} \n\n`;
            });

            document.body.appendChild(code);
        };


        const webGlFp = () => {
            const wg2 = document.createElement("canvas").getContext("webgl2");

            HARDWARE.wg2 = {
                MAX_VIEWPORT_DIMS: Array.from(wg2.getParameter(wg2.MAX_VIEWPORT_DIMS)).slice(0, 2).join("|"),
                MAX_VERTEX_UNIFORM_COMPONENTS: wg2.getParameter(wg2.MAX_VERTEX_UNIFORM_COMPONENTS),
                MAX_VERTEX_UNIFORM_VECTORS: wg2.getParameter(wg2.MAX_VERTEX_UNIFORM_VECTORS),
            }

            HARDWARE_UNSTABLE.wg2 = {
                MAX_SAMPLES: wg2.getParameter(wg2.MAX_SAMPLES),
            }
        }

        window.setTimeout(() => {
            const audioCtx = new window.AudioContext();
            HARDWARE.hardwareConcurrency = navigator.hardwareConcurrency;
            HARDWARE.sampleRate = audioCtx.sampleRate;
            HARDWARE.maxChannelCount = audioCtx.destination.maxChannelCount;
            HARDWARE_UNSTABLE.colorDepth = screen.colorDepth;

            OS_PARTIALLY_STABLE.fonts = {
                microsoft: hasFont("Microsoft YaHei"),
                apple: hasFont("AppleGothic"),
                droid: hasFont("Droid Sans Mono"),
            };

            OS_RARELY_CHANGEABLE.language = navigator.language;
            OS_RARELY_CHANGEABLE.darkTheme = window.matchMedia("(prefers-color-scheme: dark)").matches;
            OS_RARELY_CHANGEABLE.timeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;


            webGlFp()
            const SECOND = {};
            SECOND.colorGamut = ["srgb", "p3", "rec2020"].map(((e) => {
                    return !!window.matchMedia(`( color-gamut: ${e})`).matches && e;
                }
            )).filter(Boolean);
            SECOND.defaultVoice = speechSynthesis.getVoices()[0];
            SECOND.emoji = "TODO";

            renderResult();
        }, 100);


</script>
</html>
